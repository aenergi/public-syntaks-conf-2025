# Syntaks Conference: Embedding, Clustering and Structured Output Examples

## What is this project?

This project provides example code and demonstrations for clustering techniques and generating structured output using Large Language Models (LLMs). It is designed to showcase practical applications and best practices for these technologies, particularly in the context of the Syntaks conference.

## Repository Overview

This repository is organized as follows:

### Notebooks
- All Jupyter notebooks are located in the `notebooks/` folder.
- These notebooks demonstrate various steps, including data processing, clustering, and generating structured outputs.

### Data
- The `data/` folder serves as the central location for all input and output files used in the project.
- The `data/json_files/` folder includes a small example dataset extracted from the FÃ¦drelandsvennen RSS feed ([FVN RSS](https://www.fvn.no/rss/)) this is where you can add your own input data in json format.
- All outputs generated by running the notebooks will be saved in the `data/` folder, ensuring a clear and organized structure for results.

### Source Code
- The `src/` folder contains the source code for the project, organized into the following submodules:
  - `functions/`: Contains utility functions for data processing and cleaning.
  - `llm/`: Includes setup and configuration for working with Large Language Models (LLMs).
  - `models/`: Contains model definitions and related logic.

This structure ensures modularity and ease of navigation for users and contributors.

## Setting Up the Environment

### Installing the `uv` Package Manager

`uv` is a package manager used in this project to manage dependencies and virtual environments. To install `uv`, follow these steps:

1. **On Linux/macOS:**
   ```bash
   curl -sSL https://install.uv.tools | bash
   ```
2. **On Windows:**
   Open PowerShell as Administrator and run:
   ```powershell
   iwr -useb https://install.uv.tools | iex
   ```

After installation, verify that `uv` is installed by running:
```bash
uv --version
```

For more details, refer to the [official uv installation documentation](https://docs.astral.sh/uv/getting-started/installation/).

### Setting Up the Virtual Environment

1. Create a virtual environment using `uv`:
   - **On Linux/macOS:**
     ```bash
     uv venv
     source .venv/bin/activate
     uv sync
     ```
   - **On Windows:**
     ```cmd
     uv venv
     .venv\Scripts\activate
     uv sync
     ```

2. Ensure that Jupyter notebooks are run using a kernel connected to the virtual environment created with `uv`.

### Logging into Azure 

The notebooks require access to Azure resources, ensure you are logged into your Azure account:

1. Install the Azure CLI if not already installed:
   - **On Linux/macOS:**
     ```bash
     curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash
     ```
   - **On Windows:**
     Download and install from [Azure CLI](https://aka.ms/installazurecliwindows).

2. Log in to Azure:
   ```bash
   az login
   ```

3. Set the correct subscription.

### Required Azure Resources

To run the notebooks and scripts in this project, the following Azure resources need to be set up:

1. **Azure AI Hub**:
   - Azure AI Hub is used for deploying and managing AI models, including OpenAI models.
   - Follow the [Azure AI Hub documentation](https://learn.microsoft.com/en-us/azure/ai-foundry/how-to/deploy-models-openai) for detailed instructions on setting up and deploying models.
   - Deploy models for embedding and chat in AI Foundry.

2. **Azure Cognitive Services (Content Safety)**:
   - Ensure you have access to the Azure Content Safety resource.
   - Follow the [Azure Content Safety prerequisites](https://learn.microsoft.com/nb-no/azure/ai-services/content-safety/quickstart-text?tabs=visual-studio%2Cwindows&pivots=programming-language-python) to set up the resource.
   - This service is used for text content safety analysis.

3. **Azure Key Vault**:
   - Create an Azure Key Vault resource.
   - Store secrets such as Azure OpenAI endpoints and Content safety endpoint in the Key Vault.
   - Note the Key Vault URL.


### Environment Variables

An example `.env.example` file is provided in the repository. To set up your environment variables, copy this file to `.env`:

```bash
cp .env.example .env
```

Some environment variables are optional and not necessary when using Azure credentials. Ensure to review and update the `.env` file as needed for your setup.

## Maintaining Clean Jupyter Notebooks

To maintain clean and lightweight Jupyter notebooks in the repository, it is recommended to use `nbstripout` to strip output cells. This ensures that only the code and markdown content are stored in version control, keeping the repository clean.

#### Enabling `nbstripout`

Run the following command to activate `nbstripout` for the repository:

```bash
nbstripout --install --attributes .gitattributes
```

This will configure `nbstripout` to automatically strip output cells from Jupyter notebooks when they are committed to the repository.


## Managing Dependencies with UV
To manage dependencies using `uv`:
- Add a new package:
  ```bash
  uv add <package-name>
  ```
- Remove an existing package:
  ```bash
  uv remove <package-name>
  ```
- Synchronize dependencies:
  ```bash
  uv sync
  ```

